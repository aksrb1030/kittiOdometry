#include "common.hpp"

class kittiIO
{
private:
    /* data */

    double colorMap[64][3] = {
            {0,	0,	0.562500000000000},
            {0,	0,	0.625000000000000},
            {0,	0,	0.687500000000000},
            {0,	0,	0.750000000000000},
            {0,	0,	0.812500000000000},
            {0,	0,	0.875000000000000},
            {0,	0,	0.937500000000000},
            {0,	0,	1},
            {0,	0.0625000000000000,	1},
            {0,	0.125000000000000,	1},
            {0,	0.187500000000000,	1},
            {0,	0.250000000000000,	1},
            {0,	0.312500000000000,	1},
            {0,	0.375000000000000,	1},
            {0,	0.437500000000000,	1},
            {0,	0.500000000000000,	1},
            {0,	0.562500000000000,	1},
            {0,	0.625000000000000,	1},
            {0,	0.687500000000000,	1},
            {0,	0.750000000000000,	1},
            {0,	0.812500000000000,	1},
            {0,	0.875000000000000,	1},
            {0,	0.937500000000000,	1},
            {0,	1,	1},
            {0.0625000000000000,	1,	0.937500000000000},
            {0.125000000000000,	1,	0.875000000000000},
            {0.187500000000000,	1,	0.812500000000000},
            {0.250000000000000,	1,	0.750000000000000},
            {0.312500000000000,	1,	0.687500000000000},
            {0.375000000000000,	1,	0.625000000000000},
            {0.437500000000000,	1,	0.562500000000000},
            {0.500000000000000,	1,	0.500000000000000},
            {0.562500000000000,	1,	0.437500000000000},
            {0.625000000000000,	1,	0.375000000000000},
            {0.687500000000000,	1,	0.312500000000000},
            {0.750000000000000,	1,	0.250000000000000},
            {0.812500000000000,	1,	0.187500000000000},
            {0.875000000000000,	1,	0.125000000000000},
            {0.937500000000000,	1,	0.0625000000000000},
            {1,	1,	0},
            {1,	0.937500000000000,	0},
            {1,	0.875000000000000,	0},
            {1,	0.812500000000000,	0},
            {1,	0.750000000000000,	0},
            {1,	0.687500000000000,	0},
            {1,	0.625000000000000,	0},
            {1,	0.562500000000000,	0},
            {1,	0.500000000000000,	0},
            {1,	0.437500000000000,	0},
            {1,	0.375000000000000,	0},
            {1,	0.312500000000000,	0},
            {1,	0.250000000000000,	0},
            {1,	0.187500000000000,	0},
            {1,	0.125000000000000,	0},
            {1,	0.0625000000000000,	0},
            {1,	0,	0},
            {0.937500000000000,	0,	0},
            {0.875000000000000,	0,	0},
            {0.812500000000000,	0,	0},
            {0.750000000000000,	0,	0},
            {0.687500000000000,	0,	0},
            {0.625000000000000,	0,	0},
            {0.562500000000000,	0,	0},
            {0.500000000000000,	0,	0}
        };

public:
    kittiIO(std::string &path);
    ~kittiIO();

    int readOdometry(std::string &path, std::vector<std::string> &vecPath);

    int loadData(const std::string &strPathToSequence,std::vector<std::string> &vstrImageGray ,std::vector<std::string> &vstrImageRGB,
                  std::vector<std::string> &vstrPointCloudLiDAR, std::string &vstrPose, std::string &vstrCalib, std::vector<double> &vTimestamps);
                  
    int poseTransform(std::string &path);
    
    int makeMap(std::string &vstrCalib, std::string &vstrPose, std::vector<std::string> &vstrPointCloudLiDAR,
                std::vector<std::string> &vstrImageRGB, std::vector<std::string> &vstrImageGray);
};